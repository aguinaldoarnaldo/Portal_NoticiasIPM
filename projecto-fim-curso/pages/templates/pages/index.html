{% load static %}
<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IPM | Jornal Estudantil</title>
    <link rel="stylesheet" href="{% static 'css/styles.css' %}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>

    <header class="main-header">
        <div class="header-top">
            <div class="logo">
                <img src="{% static 'images/logo_ipm2.png' %}" alt="IPM Logo" onerror="this.src='https://via.placeholder.com/50?text=IPM'">
                <span>IPM Noticias</span>
            </div>
            <div class="social-icons">
                <a href="#"><i class="fab fa-facebook-f"></i></a>
                <a href="#"><i class="fab fa-twitter"></i></a>
                <a href="#"><i class="fab fa-instagram"></i></a>
            </div>
        </div>
        <nav class="main-nav">
            <ul>
                <li><a href="{% url 'pages:index' %}" class="active">Início</a></li>
                <li><a href="{% url 'pages:notice' %}">Notícias</a></li>
                <li><a href="{% url 'pages:category_news' 'Esportes' %}">Esportes</a></li>
            </ul>
        </nav>
    </header>

    {% with noticias|first as latest %}
    {% if latest %}
    <section class="hero-section">
        <img src="{% if latest.imagem %}{{ latest.imagem.url }}{% else %}{% static 'images/hero-fallback.jpg' %}{% endif %}" alt="{{ latest.titulo }}" class="hero-bg" onerror="this.src='https://via.placeholder.com/1920x1080?text=Alpha+News'">
        <div class="hero-content">
            <span class="category-badge">{{ latest.categoria.categoria }}</span>
            <h1>{{ latest.titulo }}</h1>
            <p>{{ latest.subtitulo|default:latest.conteudo|truncatewords:20 }}</p>
            <a href="{% url 'pages:noticia_detail' latest.id %}" class="btn-read-more">Ler mais <i class="fas fa-arrow-right"></i></a>
        </div>
    </section>
    {% endif %}
    {% endwith %}

    <main class="container">
        <h2 class="section-title"><i class="fas fa-star"></i> DESTAQUES</h2>
        <section class="highlight-cards">
            {% for noticia in noticias|slice:"1:4" %}
            <article class="card">
                <div class="card-img-wrapper">
                    <img src="{% if noticia.imagem %}{{ noticia.imagem.url }}{% else %}{% static 'images/card-fallback.jpg' %}{% endif %}" alt="{{ noticia.titulo }}" onerror="this.src='https://via.placeholder.com/400x300?text=Alpha+News'">
                    <span class="category-badge">{{ noticia.categoria.categoria }}</span>
                </div>
                <div class="card-content">
                    <h3><a href="{% url 'pages:noticia_detail' noticia.id %}">{{ noticia.titulo }}</a></h3>
                    <div class="meta">
                        <span><i class="fas fa-calendar-alt"></i> {{ noticia.publicado_em|date:"d M Y" }}</span>
                        <span><i class="fas fa-user"></i> {{ noticia.autor }}</span>
                    </div>
                </div>
            </article>
            {% empty %}
            <p>Nenhuma notícia em destaque no momento.</p>
            {% endfor %}
        </section>

        <div class="main-wrapper">
            <section class="recent-news">
                <h2 class="section-title"><i class="fas fa-clock"></i> NOTÍCIAS RECENTES</h2>
                <div class="news-list">
                    {% for noticia in noticias|slice:"1:10" %}
                    <article class="news-item">
                        <a href="{% url 'pages:noticia_detail' noticia.id %}">
                            <img src="{% if noticia.imagem %}{{ noticia.imagem.url }}{% else %}{% static 'images/thumb-fallback.jpg' %}{% endif %}" alt="{{ noticia.titulo }}" onerror="this.src='https://via.placeholder.com/150x100?text=Alpha'">
                        </a>
                        <div class="item-text">
                            <h4><a href="{% url 'pages:noticia_detail' noticia.id %}">{{ noticia.titulo }}</a></h4>
                            <p>{{ noticia.subtitulo|truncatechars:100 }}</p>
                            <span class="item-meta">{{ noticia.categoria.categoria }} | {{ noticia.publicado_em|date:"d/m/Y" }}</span>
                        </div>
                    </article>
                    {% empty %}
                    <p>Fique atento para novas atualizações.</p>
                    {% endfor %}
                </div>
            </section>

            <aside class="sidebar">
                <div class="widget events-widget">
                    <h3><i class="fas fa-calendar-check"></i> EVENTOS</h3>
                    <ul>
                        {% for evento in eventos %}
                        <li><span class="date">{{ evento.data|date:"d M" }}</span> {{ evento.titulo }}</li>
                        {% empty %}
                        <li style="color: var(--text-muted); font-size: 0.9rem;">Nenhum evento próximo.</li>
                        {% endfor %}
                    </ul>
                </div>

                <div class="widget newsletter-widget">
                    <h3><i class="fas fa-paper-plane"></i> NEWSLETTER</h3>
                    <p>Fique por dentro das novidades do IPM.</p>
                    <form>
                        <input type="email" placeholder="Seu e-mail..." style="width: 100%; padding: 0.8rem; border-radius: 0.5rem; background: var(--glass-bg); border: 1px solid var(--glass-border); color: white; margin-bottom: 1rem;">
                        <button type="submit" class="btn-primary" style="width: 100%;">Inscrever</button>
                    </form>
                </div>
            </aside>
        </div>
    </main>

    <footer class="main-footer">
        <div class="container">
            <div class="footer-grid">
                <div class="footer-info">
                    <h4>IPM</h4>
                    <p>Formando líderes através da educação e informação.</p>
                    <p><i class="fas fa-map-marker-alt"></i> Rua Principal, 123</p>
                    <p><i class="fas fa-envelope"></i> contato@ipm.edu</p>
                </div>
                <nav class="footer-nav">
                    <h4>EXPLORAR</h4>
                    <ul>
                        <li><a href="{% url 'pages:notice' %}">Notícias</a></li>
                        <li><a href="#">Esportes</a></li>
                        <li><a href="#">Eventos</a></li>
                    </ul>
                </nav>
                <div class="footer-nav">
                    <h4>SOCIAL</h4>
                    <ul>
                        <li><a href="#"><i class="fab fa-facebook"></i> Facebook</a></li>
                        <li><a href="#"><i class="fab fa-instagram"></i> Instagram</a></li>
                        <li><a href="#"><i class="fab fa-twitter"></i> Twitter</a></li>
                    </ul>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 Jornal IPM. Design Premium por Antigravity.</p>
            </div>
        </div>
    </footer>

    <script>
        // Smooth transitions for interaction
        document.querySelectorAll('.card').forEach(card => {
            card.addEventListener('mouseenter', () => {
                card.style.borderColor = 'var(--accent)';
            });
            card.addEventListener('mouseleave', () => {
                card.style.borderColor = 'var(--glass-border)';
            });
        });
    </script>
</body>
</html>
